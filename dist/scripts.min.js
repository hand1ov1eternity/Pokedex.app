let pokemonRepository=(function(){let pokemonList=[];let apiUrl='https://pokeapi.co/api/v2/pokemon/?limit=150';function getAll(){return pokemonList}
function add(pokemon){if(typeof pokemon==='object'&&pokemon.name&&pokemon.detailsUrl){pokemonList.push(pokemon)}else{console.log('Invalid Pokemon entry. Please provide a valid object with name and detailsUrl.')}}
function loadList(){return fetch(apiUrl).then(function(response){return response.json()}).then(function(json){json.results.forEach(function(item){let pokemon={name:item.name,detailsUrl:item.url};add(pokemon)})}).catch(function(e){console.error(e)})}
function loadDetails(pokemon){let url=pokemon.detailsUrl;return fetch(url).then(function(response){return response.json()}).then(function(details){pokemon.imageUrl=details.sprites.front_default;pokemon.height=details.height;pokemon.types=details.types.map((typeItem)=>typeItem.type.name)}).catch(function(e){console.error(e)})}
function addListItem(pokemon){let listItem=document.createElement('li');listItem.classList.add('list-group-item','text-center');let button=document.createElement('button');button.innerText=pokemon.name;button.classList.add('btn','pokemon-button','mx-auto');button.setAttribute('data-toggle','modal');button.setAttribute('data-target','#pokemonModal');button.addEventListener('click',function(){showDetails(pokemon)});listItem.appendChild(button);document.querySelector('.pokemon-list').appendChild(listItem)}
function showDetails(pokemon){loadDetails(pokemon).then(function(){let modalTitle=document.querySelector('.modal-title');let modalImage=document.querySelector('.modal-image');let modalDetails=document.querySelector('.modal-details');modalTitle.innerText=pokemon.name;modalImage.src=pokemon.imageUrl;modalDetails.innerText='Height: '+(pokemon.height*10)+'cm';modalDetails.innerText+='\nType: '+pokemon.types.join(', ');$('#pokemonModal').modal('show')}).catch(function(e){console.error(e)})}
return{getAll:getAll,add:add,addListItem:addListItem,loadList:loadList,loadDetails:loadDetails}})();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(pokemon){pokemonRepository.addListItem(pokemon)})})